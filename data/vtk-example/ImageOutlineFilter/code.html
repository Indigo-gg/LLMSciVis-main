<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vtk.js ImageOutlineFilter</title>
    <!-- <link rel="stylesheet" href="https://kit.fontawesome.com/419a5ebb56.css" crossorigin="anonymous"> -->
</head>

<body>
    <div id="renderer"></div>

    <script type="text/javascript" src="https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js"></script>
    <script type="text/javascript" src="https://unpkg.com/vtk.js"></script>
    <script src="https://unpkg.com/vtk.js"></script>
    <script>
        // Load the rendering pieces we want to use (for both WebGL and WebGPU)
        // import '@kitware/vtk.js/Rendering/Profiles/Geometry';

        // No need to import favicon as it is not used in the code provided

        // Use the newInstance() method to create instances of the classes
        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({
            background: [0, 0, 0],
        });
        const vtkActor = vtk.Rendering.Core.vtkActor.newInstance();
        const vtkPointSource = vtk.Filters.Sources.vtkPointSource;
        const vtkOutlineFilter = vtk.Filters.General.vtkOutlineFilter;
        const vtkMapper = vtk.Rendering.Core.vtkMapper.newInstance();
        const vtkMath = vtk.Common.Core.vtkMath;


        // ----------------------------------------------------------------------------
        // Standard rendering code setup
        // ----------------------------------------------------------------------------

        const controlPanel = `<table>
  <tr>
    <td>Number of Points</td>
    <td>
      <input class='numberOfPoints' type="range" min="1" max="500" step="1" value="25" />
    </td>
  </tr>
  <tr>
    <td>Radius</td>
    <td>
      <input class='radius' type="range" min="0.1" max="0.5" step=".01" value="0.25" />
    </td>
  </tr>
</table>
`;
        const fullScreenRenderer = vtkFullScreenRenderWindow;
        const renderer = fullScreenRenderer.getRenderer();
        const renderWindow = fullScreenRenderer.getRenderWindow();

        // ----------------------------------------------------------------------------
        // Example code
        // ----------------------------------------------------------------------------

        function addRepresentation(name, filter, props = {}) {
            const mapper = vtkMapper;
            mapper.setInputConnection(filter.getOutputPort());

            const actor = vtkActor;
            actor.setMapper(mapper);
            actor.getProperty().set(props);
            renderer.addActor(actor);

            window[`${name}Actor`] = actor;
            window[`${name}Mapper`] = mapper;
        }

        // ----------------------------------------------------------------------------

        vtkMath.randomSeed(141592);

        const pointSource = vtkPointSource.newInstance({
            numberOfPoints: 25,
            radius: 0.25,
        });
        const outline = vtkOutlineFilter.newInstance();

        outline.setInputConnection(pointSource.getOutputPort());

        addRepresentation('pointSource', pointSource, { pointSize: 5 });
        addRepresentation('outline', outline, { lineWidth: 5 });

        renderer.resetCamera();
        renderWindow.render();

        // -----------------------------------------------------------
        // UI control handling
        // -----------------------------------------------------------

        fullScreenRenderer.addController(controlPanel);

        ['numberOfPoints', 'radius'].forEach((propertyName) => {
            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {
                const value = Number(e.target.value);
                pointSource.set({ [propertyName]: value });
                renderWindow.render();
            });
        });

        // ----- Console play ground -----
        window.pointSource = pointSource;
        window.outline = outline;
        window.renderer = renderer;
        window.renderWindow = renderWindow;

    </script>

</body>

</html>